{% load static %}
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Password Reset with OTP</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

<div class="container mt-5 text-center">
    <h2>Login</h2>
    <p><a href="#" data-bs-toggle="modal" data-bs-target="#forgotPasswordModal">Forgot Password?</a></p>
</div>

<!-- ========================= -->
<!-- Forgot Password Modal -->
<!-- ========================= -->
<div class="modal fade" id="forgotPasswordModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <form method="POST" action="{% url 'forgot_password' %}">
        {% csrf_token %}
        <div class="modal-header">
          <h5 class="modal-title">Forgot Password</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          {% if error %}<div class="alert alert-danger">{{ error }}</div>{% endif %}
          <label>Email address</label>
          <input type="email" name="email" class="form-control" placeholder="Enter your email" required>
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-primary">Send OTP</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- ========================= -->
<!-- Verify OTP Modal -->
<!-- ========================= -->
<div class="modal fade" id="verifyOtpModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <form method="POST" action="{% url 'verify_otp' %}">
        {% csrf_token %}
        <div class="modal-header">
          <h5 class="modal-title">Verify OTP</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          {% if error %}<div class="alert alert-danger">{{ error }}</div>{% endif %}
          <label>OTP Code</label>
          <input type="text" name="otp" class="form-control" placeholder="Enter 6-digit OTP" required>
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-success">Verify</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- ========================= -->
<!-- Reset Password Modal -->
<!-- ========================= -->
<div class="modal fade" id="resetPasswordModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <form method="POST" action="{% url 'reset_password' %}">
        {% csrf_token %}
        <div class="modal-header">
          <h5 class="modal-title">Reset Password</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          {% if error %}<div class="alert alert-danger">{{ error }}</div>{% endif %}
          <label>New Password</label>
          <input type="password" name="password" class="form-control" placeholder="Enter new password" required>
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-warning">Reset Password</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<!-- Auto Open Modal Based on Step -->
{% if open_modal %}
<script>
document.addEventListener("DOMContentLoaded", function() {
    var modal = new bootstrap.Modal(document.getElementById("{{ open_modal }}"));
    modal.show();
});
</script>
{% endif %}

</body>
</html>
